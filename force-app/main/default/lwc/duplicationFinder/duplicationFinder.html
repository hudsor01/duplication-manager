<template>
  <div
    class="container slds-is-relative slds-brand-band_cover slds-brand-band_medium slds-p-around_medium"
  >
    <div class="slds-grid slds-grid_vertical">
      <!-- Loading Spinner -->
      <template if:true={isLoading}>
        <div
          class="slds-is-relative"
          style="position: absolute; z-index: 5; width: 100%; height: 100%"
        >
          <lightning-spinner
            alternative-text="Loading"
            size="large"
          ></lightning-spinner>
        </div>
      </template>

      <!-- Error Alert -->
      <template if:true={error}>
        <div
          class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error slds-m-bottom_medium"
          role="alert"
        >
          <span class="slds-assistive-text">Error</span>
          <lightning-icon
            icon-name="utility:error"
            size="small"
            variant="inverse"
            class="slds-m-right_x-small"
          ></lightning-icon>
          <h2>{errorMessage}</h2>
        </div>
      </template>

      <!-- Header -->
      <div class="slds-col slds-size_1-of-1 slds-p-bottom_medium">
        <div class="slds-text-heading_large">Duplicate Finder</div>
        <p class="slds-text-body_regular">
          Find and merge duplicate records in your Salesforce org
        </p>
      </div>

      <!-- Content -->
      <div class="slds-col slds-size_1-of-1">
        <div class="slds-card">
          <div class="slds-card__header slds-grid">
            <header
              class="slds-media slds-media_center slds-has-flexi-truncate"
            >
              <div class="slds-media__figure">
                <lightning-icon
                  icon-name="standard:merge"
                  alternative-text="Find Duplicates"
                  size="small"
                ></lightning-icon>
              </div>
              <div class="slds-media__body">
                <h2 class="slds-card__header-title">
                  <span>Find & Merge Duplicates</span>
                </h2>
              </div>
            </header>
          </div>
          <div class="slds-card__body slds-card__body_inner">
            <!-- Object Selector -->
            <div class="slds-form-element slds-m-bottom_medium">
              <label class="slds-form-element__label" for="object-select"
                >Select Object</label
              >
              <div class="slds-form-element__control">
                <div class="slds-select_container">
                  <select
                    id="object-select"
                    class="slds-select"
                    onchange={handleObjectChange}
                  >
                    <option value="">--Select Object--</option>
                    <option value="Account">Account</option>
                    <option value="Contact">Contact</option>
                    <option value="Lead">Lead</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="slds-grid slds-grid_align-center slds-m-top_medium">
              <lightning-button
                label="Find Duplicates"
                variant="brand"
                icon-name="utility:search"
                onclick={handleFindDuplicates}
                class="slds-m-right_medium"
              >
              </lightning-button>

              <lightning-button
                label="Run Health Check"
                variant="neutral"
                icon-name="utility:health_cloud"
                onclick={handleHealthCheck}
              >
              </lightning-button>
            </div>
          </div>
          <footer class="slds-card__footer">
            <div class="slds-text-body_small slds-text-align_center">
              Select an object to get started finding duplicates
            </div>
          </footer>
        </div>
      </div>
    </div>
  </div>
</template>
